---
title: 'http系列'
description: '面试题'
pubDate: '2024-10-12 21:33:00'
category: 'interview'
cardImage: '@images/interview/http/main/main.png'
tags: ['interview']
selected: true
show: false
---

## [HTTP 和 HTTPS](https://celestial-virid.vercel.app/posts/interview/http/http-html-htmls)

### HTTP

- 介绍

  - HTTP (HyperText Transfer Protocol)，即超文本运输协议，是实现网络通信的一种规范

- 特点

  - 支持客户/服务器模式

  - 简单快速

  - 灵活

  - 无连接

  - 无状态

### HTTPS

- 介绍

  - HTTPS = HTTP + SSL/TLS

- 流程

  - 首先客户端通过URL访问服务器建立SSL连接

  - 服务端收到客户端请求后，会将网站支持的证书信息（证书中包含公钥）传送一份给客户端

  - 客户端的服务器开始协商SSL连接的安全等级，也就是信息加密的等级

  - 客户端的浏览器根据双方同意的安全等级，建立会话密钥，然后利用网站的公钥将会话密钥加密，并传送给网站

  - 服务器利用自己的私钥解密出会话密钥

  - 服务器利用会话密钥加密与客户端之间的通信

### 区别

- HTTPS 是 HTTP 协议的安全版本，HTTP 协议的数据传输是明文的，是不安全的，HTTPS 使用了 SSL/TLS 协议进行了加密处理，相对更安全

- HTTP 和 HTTPS 使用连接方式不同，默认端口也不一样，HTTP是80，HTTPS是443

- HTTPS 由于需要设计加密以及多次握手，性能方面不如 HTTP

- HTTPS需要SSL，SSL 证书需要钱，功能越强大的证书费用越高

## [HTTPS 安全性](https://celestial-virid.vercel.app/posts/interview/http/http-secure)

### 安全特性

- SSL(Secure Sockets Layer 安全套接字协议),及其继任者传输层安全（Transport Layer Security，TLS）是为网络通信提供安全及数据完整性的一种安全协议

### 种类

- 对称加密：采用协商的密钥对数据加密

- 非对称加密：实现身份认证和密钥协商

- 摘要算法：验证信息的完整性

- 数字签名：身份验证

- CA验证机构

  - 数字证书认证机构处于客户端与服务器双方都可信赖的第三方机构的立场

  - 引入第三方证书机构，确保公开秘钥的安全性

## [UDP 和 TCP](https://celestial-virid.vercel.app/posts/interview/http/http-udp-tcp)

### UDP

- 介绍

  - 用户数据包协议

  - 面向字节流的通信协议

- 特点

  - UDP 不提供复杂的控制机制，利用 IP 提供面向无连接的通信服务

  - 传输途中出现丢包，UDP 也不负责重发

  - 当包的到达顺序出现乱序时，UDP没有纠正的功能。

  - 将数据按原样发送到网络，无法进行流量控制或避免网络拥塞。

### TCP

- 介绍

  - 传输控制协议

  - 面向数据报的通信协议

- 特点

  - 进行丢包时的重发控制，还可以对次序乱掉的分包进行顺序控制。

  - 只有在确认通信对端存在时才会发送数据，从而可以控制通信流量的浪费。

  - 在无连接的 IP 网络上通过检验和、序列号、确认应答、重发控制、连接管理和窗口控制等机制实现高可靠性通信。

### 区别

- TCP

  - 面向连接，可靠，流量控制，面向字节流，点对点全双工通信

- UDP

  - 面向无连接，不可靠，不保证交付，面向报文，支持多种交互通信

## [OSI 七层模型](https://celestial-virid.vercel.app/posts/interview/http/http-osi)

### 介绍

- 开放式通信系统互连参考模型

### 划分

- 应用层

  - 作用是通过应用程序间的交互来完成特定的网络应用

  - 在应用层交互的数据单元我们称之为报文

- 表示层

  - 作用是使通信的应用程序能够解释交换数据的含义

  - 该层提供的服务主要包括数据压缩，数据加密以及数据描述

- 会话层

  - 会话层就是负责建立、管理和终止表示层实体之间的通信会话

  - 该层提供了数据交换的定界和同步功能，包括了建立检查点和恢复方案的方法

- 传输层

  - 任务是为两台主机进程之间的通信提供服务

  - 主要的传输层协议是 TCP 和 UDP

- 网络层

  - 任务就是选择合适的网间路由和交换节点，确保数据按时成功传送

  - 传输层产生的报文或用户数据报封装成分组和包

- 数据链路层

  - 数据链路层将网络层交下来的 IP数据报组装成帧，在两个相邻节点间的链路上传送帧

- 物理层

  - 作用是实现计算机节点之间比特流的透明传送

### 传输过程

- 应用层报文经过运输层封装成报文段，再由网络层添加网络层首部信息形成数据报，接着在链路层封装成数据帧，最终在物理层封装为比特流传输到对端，对端逐层解封获取数据。

## [TCP/IP 协议](https://celestial-virid.vercel.app/posts/interview/http/http-tcp-ip)

### 介绍

- TCP(传输控制协议)

  - 一种面向连接的、可靠的、基于字节流
    的传输层通信协议

- IP(网际协议)

  - 用于封包交换数据网络的协议

### 划分

- 五层体系

  - 应用层

  - 传输层

  - 网络层

  - 数据链路层

  - 物理层

- 四层体系

  - 应用层

  - 传输层

        - 单位：报文段

  - 网络层

        - 单位：数据报

  - 网络接口层

        - 单位：帧

## [DNS](https://celestial-virid.vercel.app/posts/interview/http/http-dns)

### 介绍

- DNS（Domain Names System），域名系统，是互联网一项服务，是进行域名和与之相对应的 IP 地址进行转换的服务器

### 域名

- 域名是一个具有层次的结构，从上到下一次为根域名、顶级域名、二级域名、三级域名...

### 查询方式

- 递归查询

  - 如果 A 请求 B，那么 B 作为请求的接收者一定要给 A 想要的答案

- 迭代查询

  - 如果接收者 B 没有请求者 A 所需要的准确内容，接收者 B 将告诉请求者 A，如何去获得这个内容，但是自己并不去发出请求

### 域名缓存

- 浏览器缓存

  - 浏览器在获取网站域名的实际 IP 地址后会对其进行缓存，减少网络请求的损耗

- 操作系统缓存

  - 操作系统的缓存其实是用户自己配置的 hosts 文件

### 查询过程

- 介绍

  - CDN (全称 Content Delivery Network)，即内容分发网络

- 实现原理

  - 负载均衡系统

        - 看用户的 IP 地址，查表得知地理位置，找相对最近的边缘节点

        - 看用户所在的运营商网络，找相同网络的边缘节点

        - 检查边缘节点的负载情况，找负载较轻的节点

        - 其他，比如节点的“健康状况”、服务能力、带宽、响应时间等

  - 缓存代理

        - 命中率

         - 用户访问的资源恰好在缓存系统里，可以直接返回给用户，命中次数与所有访问次数之比

        - 回源率

         - 缓存里没有，必须用代理的方式回源站取，回源次数与所有访问次数之比

- 总结

  - CDN 目的是为了改善互联网的服务质量，通俗一点说其实就是提高访问速度

  - CDN 构建了全国、全球级别的专网，让用户就近访问专网里的边缘节点，降低了传输延迟，实现了网站加速

  - 通过 CDN 的负载均衡系统，智能调度边缘节点提供服务，相当于 CDN 服务的大脑，而缓存系统相当于 CDN 的心脏，缓存命中直接返回给用户，否则回源

## [HTTP1.0/1.1/2.0](https://celestial-virid.vercel.app/posts/interview/http/http-http101120)

### HTTP1.0

- HTTP 1.0 浏览器与服务器只保持短暂的连接，每次请求都需要与服务器建立一个TCP连接

### HTTP1.1

- 默认支持长连接（Connection: keep-alive），即在一个 TCP 连接上可以传送多个 HTTP 请求和响应，减少了建立和关闭连接的消耗和延迟

### HTTP2.0

- 多路复用

  - 在一个连接里，客户端和浏览器都可以同时发送多个请求或回应，而且不用按照顺序一一对应，这样就避免了”队头堵塞”

- 二进制分帧

  - 每个数据流都以消息的形式发送，而消息又由一个或多个帧组成。多个帧之间可以乱序发送，根据帧首部的流标识可以重新组装

- 首部压缩

  - HTTP/2在客户端和服务器端使用“首部表”来跟踪和存储之前发送的键值对，对于相同的数据，不再通过每次请求和响应发送

- 服务器推送

  - HTTP2引入服务器推送，允许服务端推送资源给客户端

### 总结

- HTTP1.0

  - 浏览器与服务器只保持短暂的连接，浏览器的每次请求都需要与服务器建立一个TCP连接

- HTTP1.1

  - 引入了持久连接，即TCP连接默认不关闭，可以被多个请求复用

  - 在同一个TCP连接里面，客户端可以同时发送多个请求

  - 虽然允许复用TCP连接，但是同一个TCP连接里面，所有的数据通信是按次序进行的，服务器只有处理完一个请求，才会接着处理下一个请求。如果前面的处理特别慢，后面就会有许多请求排队等着

  - 新增了一些请求方法

  - 新增了一些请求头和响应头

- HTTP2.0

  - 采用二进制格式而非文本格式

  - 完全多路复用，而非有序并阻塞的、只需一个连接即可实现并行

  - 使用报头压缩，降低开销

  - 服务器推送

## [状态码](https://celestial-virid.vercel.app/posts/interview/http/http-status-code)

### 介绍

- HTTP状态码（英语：HTTP Status Code），用以表示网页服务器超文本传输协议响应状态的3位数字代码

### 分类

- 1 表示消息

- 2 表示成功

- 3 表示重定向

- 4 表示请求错误

- 5 表示服务器错误

### 适用场景

- 100：客户端在发送POST数据给服务器前，征询服务器情况，看服务器是否处理POST的数据，如果不处理，客户端则不上传POST数据，如果处理，则POST上传数据。常用于POST大数据传输

- 206：一般用来做断点续传，或者是视频文件等大文件的加载

- 301：永久重定向会缓存。新域名替换旧域名，旧的域名不再使用时，用户访问旧域名时用301就重定向到新的域名

- 302：临时重定向不会缓存，常用 于未登陆的用户访问用户中心重定向到登录页面

- 304：协商缓存，告诉客户端有缓存，直接使用缓存中的数据，返回页面的只有头部信息，是没有内容部分

- 400：参数有误，请求无法被服务器识别

- 403：告诉客户端进制访问该站点或者资源，如在外网环境下，然后访问只有内网IP才能访问的时候则返回

- 404：服务器找不到资源时，或者服务器拒绝请求又不想说明理由时

- 503：服务器停机维护时，主动用503响应请求或 nginx 设置限速，超过限速，会返回503

- 504：网关超时

## [GET 和 POST 区别](https://celestial-virid.vercel.app/posts/interview/http/http-get-post)

### 介绍

- GET

  - 方法请求一个指定资源的表示形式，使用GET的请求应该只被用于获取数据

- POST

  - 方法用于将实体提交到指定的资源，通常导致在服务器上的状态变化或副作用

### 区别

- 参数位置

- 参数长度

- 安全

- 数据包

## [常见的请求头](https://celestial-virid.vercel.app/posts/interview/http/http-request-header)

### 介绍

- HTTP头字段（HTTP header fields）,是指在超文本传输协议（HTTP）的请求和响应消息中的消息头部分

### 分类

### 使用场景

- 协商缓存

- 会话状态

## [输入 URL 后](https://celestial-virid.vercel.app/posts/interview/http/http-url)

### URL 解析

### DNS 查询

### TCP 连接

### HTTP 请求

### 响应请求

### 页面渲染

## [三次握手四次挥手](https://celestial-virid.vercel.app/posts/interview/http/http-twh-fww)

### 三次握手

- 建立一个TCP连接时，需要客户端和服务器总共发送3个包

### 四次挥手

- tcp终止一个连接，需要经过四次挥手

## [websocket](https://celestial-virid.vercel.app/posts/interview/http/http-websocket)

### 介绍

- WebSocket，是一种网络传输协议，位于OSI模型的应用层。可在单个TCP连接上进行全双工通信，能更好的节省服务器资源和带宽并达到实时通迅

### 特点

- 全双工

  - 通信允许数据在两个方向上同时传输，它在能力上相当于两个单工通信方式的结合

- 二进制帧

  - 采用了二进制帧结构，语法、语义与 HTTP 完全不兼容，相比http/2，WebSocket更侧重于“实时通信”，而HTTP/2 更侧重于提高传输效率，所以两者的帧结构也有很大的区别

- 协议名

  - 引入ws和wss分别代表明文和密文的websocket协议，且默认端口使用80或443，几乎与http一致

- 握手

  - WebSocket也要有一个握手过程，然后才能正式收发数据

### 应用场景

- 弹幕

- 媒体聊天

- 协同编辑

- 基于位置的应用

- 体育实况更新

- 股票基金报价实时更新

## [CDN](https://celestial-virid.vercel.app/posts/interview/http/http-cdn)

### 介绍

- CDN (全称 Content Delivery Network)，即内容分发网络

### 实现原理

- 负载均衡系统

- 缓存代理

### 总结

- CDN 目的是为了改善互联网的服务质量，通俗一点说其实就是提高访问速度

- CDN 构建了全国、全球级别的专网，让用户就近访问专网里的边缘节点，降低了传输延迟，实现了网站加速

- 通过CDN的负载均衡系统，智能调度边缘节点提供服务，相当于CDN服务的大脑，而缓存系统相当于CDN的心脏，缓存命中直接返回给用户，否则回源
