---
title: 'monorepo é¡¹ç›®æ¶æ„'
description: 'monorepo é¡¹ç›®æ¶æ„'
pubDate: '2024-11-02 21:06:00'
category: 'ink-spell'
cardImage: '@images/ink-spell/main/21-30/thirty.png'
tags: ['ink-spell']
selected: false
---

## ä»‹ç»

å•ä¸€ä»“åº“ï¼ˆ**Monorepo**ï¼‰æ¶æ„ï¼Œå¯ä»¥ç†è§£ä¸ºï¼šåˆ©ç”¨å•ä¸€ä»“åº“æ¥ç®¡ç†å¤šä¸ª **packages** çš„ä¸€ç§**ç­–ç•¥æˆ–æ‰‹æ®µ**

**Monorepo** ç›®å½•ä¸­é™¤äº†ä¼šæœ‰å…¬å…±çš„ **package.json** ä¾èµ–ä»¥å¤–ï¼Œåœ¨æ¯ä¸ª **sub-package** å­åŒ…ä¸‹é¢ï¼Œä¹Ÿä¼šæœ‰å…¶ç‰¹æœ‰çš„ **package.json** ä¾èµ–ã€‚

å…„å¼Ÿæ¨¡å—ä¹‹é—´å¯ä»¥é€šè¿‡æ¨¡å— **package.json** å®šä¹‰çš„ **name** ç›¸äº’å¼•ç”¨ï¼Œä¿è¯æ¨¡å—ä¹‹é—´çš„ç‹¬ç«‹æ€§

## monorepo é¡¹ç›®æ­å»º

### **èƒŒæ™¯**

ä¼ ç»Ÿçš„å¤šä»“åº“ **Multirepo** æ¨¡å¼ï¼Œé€šå¸¸éƒ½æ˜¯ä¸€ä¸ªä»“åº“å­˜æ”¾ä¸€ä¸ªé¡¹ç›®ã€‚æ¯”å¦‚ç°åœ¨ä½ æœ‰ä¸‰ä¸ªé¡¹ç›®ï¼Œå°±éœ€è¦åˆ›å»ºä¸‰ä¸ªè¿œç¨‹ä»“åº“ï¼Œå¹¶ä¸”éœ€è¦ä¸ºæ¯ä¸ªé¡¹ç›®å•ç‹¬å®‰è£…å’Œå‡çº§ä¾èµ–

è€Œå•ä¸€ä»“åº“ **Monorepo** æ¨¡å¼ï¼Œå°±æ˜¯åœ¨ä¸€ä¸ªä»“åº“ä¸­ç®¡ç†å¤šä¸ªé¡¹ç›®ï¼Œè¿™äº›é¡¹ç›®å¯ä»¥æ˜¯ç‹¬ç«‹çš„ï¼Œä¹Ÿå¯ä»¥ç›¸äº’ä¾èµ–ã€‚é€šè¿‡ **Monorepo**ï¼Œå¤šä¸ªé¡¹ç›®å¯ä»¥å…±äº«ä¾èµ–ã€‚

### å®‰è£…åŒ…ç®¡ç†å·¥å…·

åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®ç›®å½• **pnpm-monorepo**ï¼Œæ ¹ç›®å½•è¿è¡Œ **pnpm init** åˆ›å»º **packages.json** æ–‡ä»¶

ç„¶åæ ¹æ®ç›®å½•åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ **packages**ï¼Œç”¨äºå­˜å‚¨å­åŒ…

### é…ç½® workspace

æ ¹ç›®å½•æ–°å»ºä¸€ä¸ª **pnpm-workspace.yaml**ï¼Œå°† **packages** ä¸‹æ‰€æœ‰çš„ç›®å½•éƒ½ä½œä¸ºåŒ…è¿›è¡Œç®¡ç†

```bash
packages:
  - 'packages/*'
```

![''](@images/ink-spell/thirty/image.png)

å»æ’ä»¶å¸‚åœºæ‰¾ä¸€ä¸ªæ’ä»¶

![''](@images/ink-spell/thirty/image2.png)

å®‰è£…å®Œæˆåï¼ŒæŒ‰ä½ ctrl+shift+p æ‰“å¼€çª—å£

![''](@images/ink-spell/thirty/image3.png)

ç‚¹å‡» **Monorepoï¼šSync Workspace Folders**

ç›®å½•å°±å˜æˆè¿™æ ·äº†

![''](@images/ink-spell/thirty/image4.png)

### å­åŒ…å…±äº«

æ­¤æ—¶ï¼Œ**pnpm-workspace.yaml** å·¥ä½œç©ºé—´ä¸‹çš„æ¯ä¸ªå­åŒ…éƒ½å¯ä»¥å…±äº«æˆ‘ä»¬çš„å…¬å…±ä¾èµ–äº†ã€‚è¿˜æœ‰ä¸ªé—®é¢˜æ˜¯ï¼Œå…„å¼Ÿæ¨¡å—ä¹‹é—´å¦‚ä½•å…±äº«å‘¢ï¼Ÿ å­åŒ…ä¹‹é—´å¯ä»¥é€šè¿‡ **package.json** å®šä¹‰çš„ **name** ç›¸äº’å¼•ç”¨

ç”¨ **--workspace** å‚æ•°å»å®‰è£…å…±äº«å­åŒ…ï¼Œä¼šå» **workspace**å·¥ä½œç©ºé—´ä¸­æ‰¾ä¾èµ–é¡¹å¹¶å®‰è£…

```bash
pnpm install @libc/shared --workspace -w
```

**package.json** ä¸­å°±ä¼šè‡ªåŠ¨æ·»åŠ å¦‚ä¸‹ä¾èµ–ï¼Œ**"workspace:"** åªä¼šè§£ææœ¬åœ° **workspace** åŒ…å«çš„ **package**

```bash
"dependencies": {
   "@libc/shared": "workspace:^"
 }
```

æ­¤æ—¶ï¼Œé¡¹ç›®å°±å¯ä»¥ä½¿ç”¨å…¬å…±åŒ… **libc-shared** é‡Œçš„æ–¹æ³•ï¼Œ**import** å¼•å…¥å³å¯

```bash
import { isObject } from '@libc/shared'
```

[ä»é›¶å¼€å§‹ï¼šç”¨ vue 3 + pnpm æ‰“é€ é«˜æ•ˆçš„ Monorepo é¡¹ç›®æ¶æ„ ğŸ¦„](https://juejin.cn/post/7415776780076105779)
